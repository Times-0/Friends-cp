var FORMALIZE=function(e,a,o,i){var t="placeholder"in o.createElement("input"),n="autofocus"in o.createElement("input"),r=!(!e.browser.msie||6!==parseInt(e.browser.version,10));!e.browser.msie||parseInt(e.browser.version,10);return{go:function(){for(var e in FORMALIZE.init)FORMALIZE.init[e]()},init:{ie6_skin_inputs:function(){if(r&&e("input, select, textarea").length){var a=/button|submit|reset/,o=/date|datetime|datetime-local|email|month|number|password|range|search|tel|text|time|url|week/;e("input").each(function(){var i=e(this);this.getAttribute("type").match(a)?(i.addClass("ie6-button"),this.disabled&&i.addClass("ie6-button-disabled")):this.getAttribute("type").match(o)&&(i.addClass("ie6-input"),this.disabled&&i.addClass("ie6-input-disabled"))}),e("textarea, select").each(function(){this.disabled&&e(this).addClass("ie6-input-disabled")})}},autofocus:function(){!n&&e(":input[autofocus]").length&&e(":input[autofocus]:visible:first").focus()},placeholder:function(){!t&&e(":input[placeholder]").length&&(FORMALIZE.misc.add_placeholder(),e(":input[placeholder]").each(function(){var a=e(this),o=a.attr("placeholder");a.focus(function(){a.val()===o&&a.val("").removeClass("placeholder-text")}).blur(function(){FORMALIZE.misc.add_placeholder()}),a.closest("form").submit(function(){a.val()===o&&a.val("").removeClass("placeholder-text")}).bind("reset",function(){setTimeout(FORMALIZE.misc.add_placeholder,50)})}))}},misc:{add_placeholder:function(){!t&&e(":input[placeholder]").length&&e(":input[placeholder]").each(function(){var a=e(this),o=a.attr("placeholder");a.val()&&a.val()!==o||a.val(o).addClass("placeholder-text")})}}}}(jQuery,0,this.document);function itunesInterstitial(){$("#itunesLink").mousedown()}jQuery(document).ready(function(){FORMALIZE.go()}),Drupal.omega=Drupal.omega||{},function(e){var a,o;Drupal.omega.getCurrentLayout=function(){return a},Drupal.omega.getPreviousLayout=function(){return o},Drupal.omega.crappyBrowser=function(){return e.browser.msie&&parseInt(e.browser.version,10)<9},Drupal.omega.checkLayout=function(a){if(Drupal.settings.omega.layouts.queries.hasOwnProperty(a)&&Drupal.settings.omega.layouts.queries[a]){var o=Drupal.omega.checkQuery(Drupal.settings.omega.layouts.queries[a]);if(!o&&a==Drupal.settings.omega.layouts.primary){var i=e('<div id="omega-check-query"></div>').prependTo("body");i.append('<style media="all">#omega-check-query { position: relative; z-index: -1; }</style>'),i.append('\x3c!--[if (lt IE 9)&(!IEMobile)]><style media="all">#omega-check-query { z-index: 100; }</style><![endif]--\x3e'),o=100==parseInt(i.css("z-index")),i.remove()}return o}return!1},Drupal.omega.checkQuery=function(a){var o=e('<div id="omega-check-query"></div>').prependTo("body");o.append('<style media="all">#omega-check-query { position: relative; z-index: -1; }</style>'),o.append('<style media="'+a+'">#omega-check-query { z-index: 100; }</style>');var i=100==parseInt(o.css("z-index"));return o.remove(),i},Drupal.behaviors.omegaMediaQueries={attach:function(i){e("body",i).once("omega-mediaqueries",function(){var i=e.inArray(Drupal.settings.omega.layouts.primary,Drupal.settings.omega.layouts.order),t=e('<div id="omega-media-query-dummy"></div>').prependTo("body");t.append('<style media="all">#omega-media-query-dummy { position: relative; z-index: -1; }</style>'),t.append('\x3c!--[if (lt IE 9)&(!IEMobile)]><style media="all">#omega-media-query-dummy { z-index: '+i+"; }</style><![endif]--\x3e");for(var n in Drupal.settings.omega.layouts.order)t.append('<style media="'+Drupal.settings.omega.layouts.queries[Drupal.settings.omega.layouts.order[n]]+'">#omega-media-query-dummy { z-index: '+n+"; }</style>");e(window).bind("resize.omegamediaqueries",function(){var i;i=t.css("z-index"),i=parseInt(i),o=a,a=Drupal.settings.omega.layouts.order.hasOwnProperty(i)?Drupal.settings.omega.layouts.order[i]:"mobile",o!=a&&(e("body").removeClass("responsive-layout-"+o).addClass("responsive-layout-"+a),e.event.trigger("responsivelayout",{from:o,to:a}))}).load(function(){e(this).trigger("resize.omegamediaqueries")})})}}}(jQuery),window.location.hostname.indexOf("clubpenguin.com")>-1&&(document.domain="clubpenguin.com"),"undefined"==typeof CP&&(CP={}),function(e){CP.home=function(a){this.options={widths:{}},e.extend(!0,this.options,a),this.currentIndex=0,this.numBillboards=0,this.autoRotate=null,this.load()},CP.home.prototype.initBBNav=function(){var a,o=this,i="",t=1;e("#billboards a").each(function(n,r){a=!1,e(r).hasClass("flash-billboard")&&(a=!0),(!a||a&&CP.global.runningVars.hasFlash)&&(o.numBillboards=n+1),i+='<div class="indicator '+(a?"is-flash":"no-flash")+'" '+(0==n?'id="ind-scene"':"")+'><a href="javascript:void(0);" '+(0==n?'class="active"':"")+">"+t+"</a></div>",a&&!CP.global.runningVars.hasFlash||t++}),e("#billboards a").length>1?(e("#indicators").html(i),e(".indicator").first().hasClass("no-flash")&&e("#billboards").show()):(e("#billboard-arrows").hide(),e("#billboard-welcome").show())},CP.home.prototype.initPromo=function(){var a=this;jQuery.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/"+CP.global.runningVars.langPath+"json/homepage/promos/"+CP.runningVars.countryCode,data:"",async:!0,success:function(o){e.each(o,function(o,i){if(i.homepage_item_toggle&&"1"==i.homepage_item_toggle[0].value)return!0;var t=i.nid,n=i.promo_box_type[0].value,r=i.on_now_badge_color[0].value,s=i.homepage_promo_color[0].value,l=i.homepage_promo_text[0].value,d=i.title,c=i.homepage_promo_bi_tracking?i.homepage_promo_bi_tracking[0].value:d,u=i.homepage_promo_image[0].uri,p=i.homepage_promo_image_alt?i.homepage_promo_image_alt[0].value:c,m=!!i.homepage_promo_video_embed&&i.homepage_promo_video_embed[0].value,h=i.homepage_promo_legal_text?i.homepage_promo_legal_text[0].value:"",g=c.split(" ").join("_"),v=i.homepage_promo_cp_link?i.homepage_promo_cp_link[0].url:"",f=i.homepage_promo_cp_link?i.homepage_promo_cp_link[0].title:"";try{var b="";e.each(i.homepage_promo_cp_link[0].attributes.data,function(e,a){b+="data-"+e+'="'+a+'" '})}catch(e){b=""}var y="";e.each(i.personalize_promo,function(e,a){y+=a.value+" "});var _="";if("plain_image"==n){var w=i.homepage_promo_custom_imag?i.homepage_promo_custom_imag[0].uri:"";_+='                            <div class="promo-block '+y+'">                                <a href="'+v+'" '+b+' data-ga="'+g+'"><img src="'+w+'" alt="'+p+'" /></a>                            </div>'}else if("video_image"==n){w=i.homepage_promo_custom_imag?i.homepage_promo_custom_imag[0].uri:"";_+='                            <div class="promo-block '+y+'">                                <a class="trigger-video" href="#" id="trigger-'+t+'" data-ga="'+g+'"><img src="'+w+'" alt="'+p+'" /></a>                            </div>'}else if("cfc_counter"==n){for(var C="0",x=new Date,k=15*parseInt(x.getMinutes()/15)%60,P=String(x.getMonth())+String(x.getDate())+String(x.getHours())+String(k),j=(jQuery.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/json/cfc_total/"+P,data:"",async:!1,success:function(e){C=e.coins_total}}),""),I=0;I<C.length;I++)coins_total_span="<span>"+C[I]+"</span>",j+=coins_total_span;_+='<div class="promo-block cfc_counter '+y+'"><span class="cfc_total">'+j+"</span></div>"}else{if("itunes"==n)_+='                            <div class="promo-block purple '+y+'">                                <div class="promo-'+n+'">                                    <a class="'+(""!=m?"trigger-video":"")+'" href="'+v+'" id="thumb-'+t+'" '+b+' data-ga="'+g+'">                                        <img src="'+u+'" alt="'+p+'" />                                    </a>                                </div>                                <div class="song-info">                                    <div class="title">'+l+'</div>                                    <a class="download-from-itunes agegated-link" href="'+v+'" '+b+' data-ga="'+g+'">'+Drupal.t("Download on iTunes")+'</a>                                    <div class="legalese">'+Drupal.t("Apple, the Apple logo, and iTunes are trademarks of Apple Inc. registered in the U.S. and other countries.")+"</div>                                </div>                            </div>";else if("audio"==n&&i.homepage_promo_audio){var E=i.homepage_promo_audio[0].uri,D=E.split("/").pop(),A=E.replace("https","http"),M="/download/audio/"+D,L=i.homepage_promo_audio_title?i.homepage_promo_audio_title[0].value:"",O=i.homepage_promo_audio_sub?i.homepage_promo_audio_sub[0].value:"",q=D.toLowerCase().indexOf(".m4a")>-1?"m4a":"mp3",R=g+"_download",z='                            <div id="audio-player-'+t+'" class="audio-player jp-jplayer"></div>                                <div id="jp_container_1" class="jp-audio audio-container">                                <div class="jp-type-single">                                    <div class="jp-gui jp-interface">                                        <div class="title">'+L+'</div>                                        <div class="sub-title">'+O+'</div>                                        <ul class="jp-controls">                                            <li><a href="javascript:;" class="jp-play" tabindex="2" data-ga="'+(g+"_play")+'"><span class="icon"></span><span class="label">'+Drupal.t("Play")+'</span></a></li>                                            <li><a href="javascript:;" class="jp-pause" tabindex="2"><span class="icon"></span><span class="label">'+Drupal.t("Pause")+'</span></a></li>                                            <li><a href="javascript:;" class="jp-stop" tabindex="2"><span class="icon"></span><span class="label">'+Drupal.t("Stop")+'</span></a></li>                                        </ul>                                        <div class="jp-progress">                                            <div class="jp-seek-bar">                                                <div class="jp-play-bar"><div class="jp-scrubber"></div></div>                                            </div>                                        </div>                                        <div class="jp-timers">                                            <span class="jp-current-time current"></span>                                            <span class="jp-duration total"></span>                                        </div>                                    </div>                                </div>                            </div>';_='                            <div class="promo-block promo-block-audio '+s+" "+y+'">                                <div class="promo-audio">                                    <img src="'+u+'" alt="'+p+'" />                                </div>                                <div class="promo-info" data-url="'+A+'" data-uploadtype="'+q+'">                                    '+z+'                                    <div class="download-area">                                        <a href="'+M+'" class="btn-download" '+b+' data-ga="'+R+'"><span>'+Drupal.t("Download FREE Song")+"</span></a>                                    </div>                                </div>                            </div>"}else{var B="on_now"==n?r:"",F="on_now"==n?'<span class="on_now_label">'+Drupal.t("On Now!")+"</span>":"",T="video"==n?"trigger-video":"",Q="video"==n?"#":v;_+='                            <div class="promo-block '+s+" "+y+'">                                <div class="promo-'+n+" "+B+'">'+F+'                                    <a class="'+T+'" href="'+Q+'" id="thumb-'+t+'" '+b+' data-ga="'+g+'">                                        <img src="'+u+'" alt="'+p+'" />                                    </a>                                </div>                                <div class="promo-info">                                    <div class="title">'+l+'</div>                                    <a class="cta '+T+'" href="'+Q+'" id="trigger-'+t+'" '+b+' data-ga="'+g+'">'+f+'</a>                                    <div class="legal">'+h+"</div>                                </div>                            </div>"}}m&&(_+='<div style="display:none" class="video-embed-code" id="embed-'+t+'">\x3c!--'+m+"--\x3e</div>"),e("#promo-blocks").append(_),"audio"==n&&a.setupAudioPlayer()});var i=e(".promo-block").length-2,t=0;e(".promo-block").each(function(o,n){!e(n).hasClass(a.options.UTYPE)&&t<i&&(e(n).hide(),t++)});try{window.agegate.initLinks("#promo-blocks a")}catch(e){}e("#promo-blocks").slideDown()}})},CP.home.prototype.setupAudioPlayer=function(){var a=e(".promo-block-audio .promo-info"),o=(a.find(".audio-container").attr("id"),a.data("url")),i=a.find(".jp-timers .current"),t=a.find(".jp-timers .total"),n=a.data("uploadtype"),r={m4a:o};"mp3"==n&&(r={mp3:o}),e.jPlayer.timeFormat.padMin=!1,a.find(".audio-player").jPlayer({ready:function(a){e(this).jPlayer("setMedia",r)},swfPath:"/sites/all/libraries/jplayer",supplied:n,wmode:"window",solution:"flash,html",keyEnabled:!0,ended:function(e){i.hide(),t.show()},play:function(e){i.show(),t.hide()},pause:function(e){}})},CP.home.prototype.setupAutoRotate=function(){var a=navigator.userAgent.toLowerCase().indexOf("safari/")>-1,o=this;this.numBillboards>1&&(this.autoRotate=setInterval(function(){if(e("#indicators a").length){if(o.currentIndex=(o.currentIndex+1)%o.numBillboards,a){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window),e("#indicators a").get(o.currentIndex).dispatchEvent(i)}else e("#indicators a").get(o.currentIndex).click();o.setupAutoRotate()}},1e4))},CP.home.prototype.initListeners=function(){var a=this;e(".trigger-video").live("click",function(){var a=this.id.replace("trigger-","embed-");return a=a.replace("thumb-","embed-"),temp=e("#"+a).html(),e("#modal-content").html(temp.replace("\x3c!--","").replace("--\x3e","")),CP.runningVars.modal.open(),!1}),e(".indicator").live("click",function(o){var i;clearInterval(a.autoRotate),e(this).hasClass("is-flash")?(e("#billboards").hide(),i=e(".indicator.is-flash").index(this)):(e("#billboards").show(),i=e(".indicator.no-flash").index(this),e("#billboards a").hide(),e(e("#billboards a.no-flash").get(i)).show()),e("#indicators a").removeClass("active"),e(this).find("a").addClass("active")}),e("#arrow-right, #arrow-left").mouseover(function(a){e(this).addClass("active")}).mouseout(function(a){e(this).removeClass("active")});var o=navigator.userAgent.toLowerCase().indexOf("safari/")>-1;e("#arrow-left").live("click",function(i){a.currentIndex=a.currentIndex-1,a.currentIndex<0&&(a.currentIndex=a.numBillboards-1);try{if(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window),e("#indicators a").get(a.currentIndex).dispatchEvent(t)}else e("#indicators a").get(a.currentIndex).click()}catch(i){}}),e("#arrow-right").live("click",function(i){a.currentIndex=(a.currentIndex+1)%a.numBillboards;try{if(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window),e("#indicators a").get(a.currentIndex).dispatchEvent(t)}else e("#indicators a").get(a.currentIndex).click()}catch(i){}})},CP.home.prototype.initBB=function(){var a=this,o=window.location.hash.substr(2);o.length<=0&&(o="none"),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))&&(o="on_mobile");jQuery.ajax({type:"GET",url:window.location.protocol+"//"+window.location.host+"/"+CP.global.runningVars.langPath+"json/homepage/billboards/"+CP.runningVars.countryCode+"/"+o,data:"",async:!1,success:function(o){e.each(o,function(a,o){if(o.homepage_item_toggle&&"1"==o.homepage_item_toggle[0].value)return!0;var i="",t="no-flash ";e.each(o.personalize_billboard,function(e,a){t+=a.value+" "});var n=o.homepage_billbard_link[0].url?o.homepage_billbard_link[0].url:"",r=o.title.split(" ").join("_");try{var s="";e.each(o.homepage_billbard_link[0].attributes.data,function(e,a){a.length>0&&(s+="data-"+e+'="'+a+'" ')})}catch(e){s=""}i='<a class="'+t+'" href="'+n+'" '+s+' data-ga="'+r+'">',i+='<img alt="'+o.title+'" src="'+o.homepage_billboard_file_up[0].uri+'">',i+="</a>",e("#billboard-welcome").before(i),e("#billboard-welcome").hide()});var i=e("#billboards a").length,t=0;e("#billboards a").each(function(o,n){!e(n).hasClass(a.options.UTYPE)&&t<i&&(e(n).remove(),t++),o>0&&e(n).hide()}),a.initBBNav();try{window.agegate.initLinks("#billboards a")}catch(e){}}})},CP.home.prototype.load=function(){this.options.UTYPE=getCookie("cpvisitor")||"new";if(this.initLanguage(),this.initModal(),this.initOverlay(),this.initCountry(),this.initBB(),this.initPromo(),this.setupAutoRotate(),this.initListeners(),!CP.global.runningVars.hasFlash){e(".indicator.is-flash").remove(),e("#billboards a.is-flash").remove(),e("#billboards").show();try{e(e("#billboards a.no-flash").get(0)).show()}catch(e){}}},CP.home.prototype.initLanguage=function(){var e=window.location.pathname.split("/")[1];"es"!=e&&"fr"!=e&&"pt"!=e&&"de"!=e&&"ru"!=e&&(e=""),CP.global.runningVars.langPath=""==e?e:e+"/"},CP.home.prototype.initModal=function(){e("#modal-overlay").remove(),e("#modal-loading").remove(),e("#modal-window").remove(),CP.runningVars.modal=new CP.utils.Modal({showClose:!0,contentCloseDelegate:".modal-close",onOpenComplete:function(){},onCloseComplete:function(){},onCloseStart:function(){},onOpenStart:function(){}})},CP.home.prototype.initCountry=function(){CP.runningVars.countryCode="US"},CP.home.prototype.initOverlay=function(){var e=new RegExp("[\\?&]overlay=([^&#]*)").exec(window.location.href),a=!1;if(e){a=decodeURIComponent(e[1]);var o=new RegExp("^https://(stage.)?secured.clubpenguin.com/(pt/|es/|de/|fr/|ru/)?(penguin|membership)/activate(/([a-zA-Z0-9]+)*/?([a-zA-Z0-9]+)*)?","i"),i=a.match(o);if(i){var t=i[1];void 0===i[1]&&(t="");var n=i[2];void 0===i[2]&&(n="");var r="";void 0!==i[5]&&void 0!==i[6]&&(r+=i[5]+"/"+i[6]);var s="https://"+t+"secured.clubpenguin.com/"+n+i[3]+"/activate/"+r;window.location.href=s}}}}(window.jQuery),window.jQuery(document).ready(function(){window.home=new CP.home});